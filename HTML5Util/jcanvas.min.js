/*
jCanvas v2.3
Caleb Evans
*/
(function(h,j,b,i,d){var c={};c.originals={width:20,height:20,cornerRadius:0,fillStyle:"transparent",strokeStyle:"transparent",strokeWidth:5,strokeCap:"butt",strokeJoin:"miter",shadowX:0,shadowY:0,shadowBlur:10,shadowColor:"transparent",x:0,y:0,x1:0,y1:0,radius:10,start:0,end:360,ccw:false,inDegrees:true,fromCenter:true,closed:false,sides:3,angle:0,text:"",font:"normal 12pt sans-serif",align:"center",baseline:"middle",source:"",repeat:"repeat"};c.defaults=h.extend({},c.originals);function a(k,l){k.fillStyle=l.fillStyle;k.strokeStyle=l.strokeStyle;k.lineWidth=l.strokeWidth;k.lineCap=l.strokeCap;k.lineJoin=l.strokeJoin;k.shadowOffsetX=l.shadowX;k.shadowOffsetY=l.shadowY;k.shadowBlur=l.shadowBlur;k.shadowColor=l.shadowColor}function g(k,l){if(l.closed===true){k.closePath();k.fill();k.stroke()}else{k.fill();k.stroke();k.closePath()}}function f(k){if(k.inDegrees===true){return b.PI/180}else{return 1}}h.fn.canvas=function(k){if(k===d){c.defaults=c.originals}else{c.defaults=h.extend({},c.defaults,k)}return this};h.fn.loadCanvas=function(k){if(k===d){k="2d"}return this[0].getContext(k)};h.fn.gradient=function(l){var k=this[0].getContext("2d"),n={x1:0,y1:0,x2:0,y2:0,r1:10,r2:100},r=h.extend({},n,l),q,p=0,o,m;if(l.r1===d&&l.r2===d){q=k.createLinearGradient(r.x1,r.y1,r.x2,r.y2)}else{q=k.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)}for(m=1;m<=i.MAX_VALUE;m+=1){if(r["c"+m]){p+=1}else{break}}for(m=1;m<=p;m+=1){o=b.round((100/(p-1))*(m-1))/100;if(r["s"+m]===d){r["s"+m]=o}q.addColorStop(r["s"+m],r["c"+m])}return q};h.fn.pattern=function(n){var k=this[0].getContext("2d"),q=h.extend({},c.defaults,n),p,l=j.createElement("img");l.src=q.source;function o(){if(l.complete===true){p=k.createPattern(l,q.repeat)}else{throw"The pattern has not loaded yet"}}try{o()}catch(m){l.onload=o}return p};h.fn.clearCanvas=function(l){var k,m,n=h.extend({},c.defaults,l);if(n.fromCenter===true){n.x-=n.width/2;n.y-=n.height/2}for(m=0;m<this.length;m+=1){k=this[m].getContext("2d");a(k,n);k.beginPath();if(l===d){k.clearRect(0,0,this.width(),this.height())}else{k.clearRect(n.x,n.y,n.width,n.height)}k.closePath()}return this};h.fn.saveCanvas=function(){var k,l;for(l=0;l<this.length;l+=1){k=this[l].getContext("2d");k.save()}return this};h.fn.restoreCanvas=function(){var k,l;for(l=0;l<this.length;l+=1){k=this[l].getContext("2d");k.restore()}return this};h.fn.scaleCanvas=function(l){var k,m,n=h.extend({},c.defaults,l);for(m=0;m<this.length;m+=1){k=this[m].getContext("2d");k.save();k.translate(n.x,n.y);k.scale(n.width,n.height);k.translate(-n.x,-n.y)}return this};h.fn.translateCanvas=function(l){var k,m,n=h.extend({},c.defaults,l);for(m=0;m<this.length;m+=1){k=this[m].getContext("2d");k.save();k.translate(n.x,n.y)}return this};h.fn.rotateCanvas=function(l){var k,n,o=h.extend({},c.defaults,l),m=f(o);for(n=0;n<this.length;n+=1){k=this[n].getContext("2d");k.save();k.translate(o.x,o.y);k.rotate(o.angle*m);k.translate(-o.x,-o.y)}return this};h.fn.drawRect=function(p){var u,o,n=h.extend({},c.defaults,p),q=f(n),m,t,l,s,k;if(n.fromCenter===true){n.x-=n.width/2;n.y-=n.height/2}for(o=0;o<this.length;o+=1){u=this[o].getContext("2d");a(u,n);if(n.cornerRadius>0){m=n.x;t=n.y;l=n.x+n.width;s=n.y+n.height;k=n.cornerRadius;if((l-m)-(2*k)<0){k=(l-m)/2}if((s-t)-(2*k)<0){k=(s-t)/2}u.beginPath();u.moveTo(m+k,t);u.lineTo(l-k,t);u.arc(l-k,t+k,k,270*q,360*q,false);u.lineTo(l,s-k);u.arc(l-k,s-k,k,0,90*q,false);u.lineTo(m+k,s);u.arc(m+k,s-k,k,90*q,180*q,false);u.lineTo(m,t+k);u.arc(m+k,t+k,k,180*q,270*q,false);u.fill();u.stroke();u.closePath()}else{u.fillRect(n.x,n.y,n.width,n.height);u.strokeRect(n.x,n.y,n.width,n.height)}}return this};h.fn.drawArc=function(l){var k,n,o=h.extend({},c.defaults,l),m=f(o);if(o.fromCenter===false){o.x+=o.radius;o.y+=o.radius}for(n=0;n<this.length;n+=1){k=this[n].getContext("2d");a(k,o);k.beginPath();k.arc(o.x,o.y,o.radius,(o.start*m)-(b.PI/2),(o.end*m)-(b.PI/2),o.ccw);g(k,o)}return this};h.fn.drawEllipse=function(l){var k,n,o=h.extend({},c.defaults,l),m=o.width*(4/3);if(o.fromCenter===false){o.x+=o.width/2;o.y+=o.height/2}o.x+=1e-10;o.y+=1e-10;for(n=0;n<this.length;n+=1){k=this[n].getContext("2d");a(k,o);k.beginPath();k.moveTo(o.x,o.y-o.height/2);k.bezierCurveTo(o.x-m/2,o.y-o.height/2,o.x-m/2,o.y+o.height/2,o.x,o.y+o.height/2);k.bezierCurveTo(o.x+m/2,o.y+o.height/2,o.x+m/2,o.y-o.height/2,o.x,o.y-o.height/2);k.closePath();k.fill();k.stroke()}return this};h.fn.drawLine=function(o){var n,r,s=h.extend({},c.defaults,o),k=i.MAX_VALUE,m,q,p;for(r=0;r<this.length;r+=1){n=this[r].getContext("2d");a(n,s);n.beginPath();n.moveTo(s.x1,s.y1);for(m=2;m<k;m+=1){q=s["x"+m];p=s["y"+m];if(q>=0&&p>=0){n.lineTo(q,p)}else{break}}g(n,s)}return this};h.fn.drawQuad=function(q){var u,p,o=h.extend({},c.defaults,q),r=i.MAX_VALUE,n,m,k,t,s;for(p=0;p<this.length;p+=1){u=this[p].getContext("2d");a(u,o);u.beginPath();u.moveTo(o.x1,o.y1);for(n=2;n<r;n+=1){m=o["x"+n];k=o["y"+n];t=o["cx"+(n-1)];s=o["cy"+(n-1)];if(m>=0&&k>=0&&t>=0&&s>=0){u.quadraticCurveTo(t,s,m,k)}else{break}}g(u,o)}return this};h.fn.drawBezier=function(w){var y,v,r=h.extend({},c.defaults,w),x=i.MAX_VALUE,q=2,n=1,p,o,u,m,t,k,s;for(v=0;v<this.length;v+=1){y=this[v].getContext("2d");a(y,r);y.beginPath();y.moveTo(r.x1,r.y1);for(s=2;s<x;s+=1){p=r["x"+q];o=r["y"+q];u=r["cx"+n];m=r["cy"+n];t=r["cx"+(n+1)];k=r["cy"+(n+1)];if(p>=0&&o>=0&&u>=0&&m>=0&&t>=0&&k>=0){y.bezierCurveTo(u,m,t,k,p,o);q+=1;n+=2}else{break}}g(y,r)}return this};h.fn.drawText=function(l){var k=this.loadCanvas(),m=h.extend({},c.defaults,l);for(e=0;e<this.length;e+=1){k=this[e].getContext("2d");a(k,m);k.textBaseline=m.baseline;k.textAlign=m.align;k.font=m.font;k.strokeText(m.text,m.x,m.y);k.fillText(m.text,m.x,m.y)}return this};h.fn.drawImage=function(p){var l,q,r=h.extend({},c.defaults,p),m=j.createElement("img"),o=m.width/m.height;m.src=r.source;function k(s){if(m.complete===true){if(p.width!==d&&p.height!==d){m.width=p.width;m.height=p.height}else{if(p.width!==d&&p.height===d){m.width=p.width;m.height=m.width/o}else{if(p.width===d&&p.height!==d){m.height=p.height;m.width=m.height*o}}}if(r.fromCenter===true){r.x-=m.width/2;r.y-=m.height/2}s.drawImage(m,r.x,r.y,m.width,m.height)}else{throw"The image has not loaded yet."}}for(q=0;q<this.length;q+=1){l=this[q].getContext("2d");a(l,r);try{k(l)}catch(n){m.onload=function(){k(l)}}}return this};h.fn.drawPolygon=function(o){var t,n,l=h.extend({},c.defaults,o),k,s,r,q,p=f(l),m;for(n=0;n<this.length;n+=1){t=this[n].getContext("2d");a(t,l);if(l.sides>=3){k=(b.PI/2)+(b.PI/l.sides)+(l.angle*p);s=(b.PI*2)/l.sides;for(m=0;m<l.sides;m+=1){r=l.x+(l.radius*b.cos(k));q=l.y+(l.radius*b.sin(k));if(l.fromCenter===false){r+=l.radius;q+=l.radius}t.lineTo(r,q);k+=s}g(t,l)}}return this};return window.jCanvas=c}(jQuery,document,Math,Number));